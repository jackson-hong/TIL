# 1/28 IT Infra - TCP/IP

### TCP/IP를 이용하고 있는 현재의 네트워크

- 배경
    - 네트워크 제조사별 독자적인 프로토콜의 범람 → 국제 규격의 프로토콜을 만들자 → OSI
    - 그러나 이전에 고안된 TCP나 IP 프로토콜이 보급되고 있었음
    - OSI 복잡성 때문에 TCP/IP의 승리

** 여기서 계층마다 하는 일은 **캡슐화**라고 하여 **데이터에 헤더**를 붙인다

- TCP/IP 4계층(RFC1122)
    - 응용 계층(httpd), 전송 계층(kernel), 인터넷 계층(kernel), 네트워크 엑세스(kernel)

### 애플리케이션 계층의 프로토콜 HTTP

- 애플리케이션 계층 프로토콜은 자신이 통신을 하는 것이 아니라 통신 자체는 모두 OS, 즉 TCP/IP에 맡긴다
- HTTP 사양은 RFC2616에서 정하고 있다
- 책에서는 소켓을 하나의 구멍으로 커널에 데이터를 넣는 개념으로 소켓통신을 묘사하였다
- 애플리케이션 프로세스는 시스템 콜을 통해 회선을 열어달라는 요청을 한다
- 이 때 IP 주소와 TCP 포트를 같이 보낸다
- 의뢰를 받은 커널은 소켓을 만들고 가상 경로가 생성된다

** 프로토콜 헤더에 Keep-Alive가 있으면 웹 서버 측에서 세션 잔존 시간을 설정하여 요청을 열어둔다

→ TCP 3way-handshaking이 발생하지 않는다

### 전송 계층 프로토콜 TCP

- 커널 내에서 통신 대상에게 전달하기 위한 준비 : 첫번째 TCP
- 신뢰도 높은 데이터 전송을 가능케 한다
- 상대 서버까지 전송하는 부분은 모두 IP에게 위임한다
- IP에는 데이터가 상대방에게 확실히 전달 됐는지, 순서가 맞는지 확인하는 기능이 없다
- 통신 정체가 발생하면 TCP가 통신 속도를 자동으로 내린다