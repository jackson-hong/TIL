# 1/19 IT Infra - 3계층 흐름

### 웹 서버 부터 AP 서버까지

1. 웹 서버로부터 요청이 도착한다
2. 스레드가 요청을 받으면 자신이 계산할 수 있는지, 아니면 DB 접속이 필요한지를 판단
3. DB 접속이 필요하면 연결 풀에 엑세스
4. DB 서버에 요청을 던진다 (접속 요청 또한 시스템콜 사용)
5. 네트워크 경유로 쿼리 전달

### AP 서버부터 DB 서버까지

1. AP 서버로부터 요청이 도착
2. 프로세스가 요청을 접수하고 **캐시**가 존재하는지 확인한다
3. 캐시에 없으면 디스크에 엑세스한다
4. 디스크가 데이터를 반환한다
5. 데이터를 캐시 형태로 저장한다
6. 결과를 AP 서버에 반환한다

** DB서버에서는 복수 개의 프로세스가 역할을 분담하는 경우가 있다 (Oracle)

** 요청을 담당하는 프로세스 따로, 메모리에 캐시를 디스크와 동기화하는 프로세스가 따로 존재

** 실제로 DB 서버 내부의 디스크는 이중화 관점에서 뒤떨어지기 때문에 직접 사용하는 경우는 드물다

### AP 서버부터 웹서버까지

1. DB 서버로부터 데이터 도착
2. 요청을 보냈던 기존 스레드가 데이터를 가지고 연산 한 후 파일 데이터를 생성
3. 결과를 웹 서버로 반호나

### 웹서버투터 클라이언트까지

1. AP 서버로부터 데이터 도착
2. 프로세스는 받은 데이터를 그대로 반환
3. 결과가 웹 브라우저로 반환되고 화면에 표시된다

### 웹 데이터의 흐름 정리

- 공통점
    - 프로세스나 스레드가 요청을 받는다
    - 도착한 요청을 파악해서 필요에 따라 별도 서버로 요청을 보낸다
    - 도착한 요청에 대해 응답한다

## 가상화

### 가상화란

- 컴퓨터 시스템에서 물리 리소스를 추상화하는 것

### 컨테이너의 역사

- ‘리소스가 격리된 프로세스’
- 하나의 OS 상에서 여러 개를 동시에 가동할 수 있음
- 각각 독립된 루트 파일 시스템, CPU/메모리, 프로세스 공간 등을 사용할 수 있다
- Sun Microsystems의 Bill Joy에 의해 만들어진 **chroot**가 컨테이너의 시발점